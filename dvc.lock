schema: '2.0'
stages:
  structure_raw:
    cmd: python3 src/data/structure_raw.py
    deps:
    - path: data/raw/
      hash: md5
      md5: ff10d1240d51d4c2bfc21c05e65d72c5.dir
      size: 21840025
      nfiles: 181
    - path: data/working_dataset.csv
      hash: md5
      md5: 02086bf6991f01344eccc4aba1935f1e
      size: 4542
    - path: dockers_started.txt
      hash: md5
      md5: cc72867581029d08025a87c527baf24e
      size: 29
    - path: params.yaml
      hash: md5
      md5: a97732e2394ca5182247ec5768501b74
      size: 3407
    - path: src/data/structure_raw.py
      hash: md5
      md5: 913a67d14af30d19176c2eeb4a6f6c88
      size: 3467
    outs:
    - path: data/raw_per_classes/
      hash: md5
      md5: d9991db9bc5d92cacbfcac0c21da6b92.dir
      size: 21797772
      nfiles: 180
  ingest:
    cmd: curl -X "GET" "http://localhost:8907/ingest"
    deps:
    - path: data/raw_per_classes/
      hash: md5
      md5: d9991db9bc5d92cacbfcac0c21da6b92.dir
      size: 21797772
      nfiles: 180
    - path: dockers_started.txt
      hash: md5
      md5: cc72867581029d08025a87c527baf24e
      size: 29
    - path: params.yaml
      hash: md5
      md5: a97732e2394ca5182247ec5768501b74
      size: 3407
    outs:
    - path: data/ocr_raw_per_classes/
      hash: md5
      md5: cdfde88443b5b21954654ff45546c15b.dir
      size: 173572
      nfiles: 182
  clean:
    cmd: curl -X "GET" "http://localhost:8907/clean"
    deps:
    - path: data/ocr_raw_per_classes/
      hash: md5
      md5: cdfde88443b5b21954654ff45546c15b.dir
      size: 173572
      nfiles: 182
    - path: dockers_started.txt
      hash: md5
      md5: cc72867581029d08025a87c527baf24e
      size: 29
    - path: params.yaml
      hash: md5
      md5: a97732e2394ca5182247ec5768501b74
      size: 3407
    outs:
    - path: data/cleaned_per_classes/
      hash: md5
      md5: 7caf4e99e2bd84fb5af58cdaaa20baf8.dir
      size: 112841
      nfiles: 3
  preprocessing:
    cmd: curl -X "GET" "http://localhost:8904/process"
    deps:
    - path: data/cleaned_per_classes/
      hash: md5
      md5: 7caf4e99e2bd84fb5af58cdaaa20baf8.dir
      size: 112841
      nfiles: 3
    - path: dockers_started.txt
      hash: md5
      md5: cc72867581029d08025a87c527baf24e
      size: 29
    - path: params.yaml
      hash: md5
      md5: a97732e2394ca5182247ec5768501b74
      size: 3407
    outs:
    - path: data/processed
      hash: md5
      md5: 9b99022b64760ddb2a80b1d3307020ea.dir
      size: 3097922
      nfiles: 4
    - path: models/vectorizers
      hash: md5
      md5: fa87d641290d53e105a10a346f2be8e6.dir
      size: 2528658
      nfiles: 1
  train:
    cmd: curl -X "GET" "http://localhost:8905/train"
    deps:
    - path: data/processed/train
      hash: md5
      md5: 1a5505fed1f6cce119405d2e06d13457.dir
      size: 2582301
      nfiles: 2
    - path: dockers_started.txt
      hash: md5
      md5: cc72867581029d08025a87c527baf24e
      size: 29
    - path: params.yaml
      hash: md5
      md5: a97732e2394ca5182247ec5768501b74
      size: 3407
    outs:
    - path: models/train
      hash: md5
      md5: fdd105e1ff0e6fe67e016cd101ec830a.dir
      size: 1682517
      nfiles: 1
  eval:
    cmd: curl -X "GET" "http://localhost:8906/eval"
    deps:
    - path: data/processed/test
      hash: md5
      md5: 2bd95f4ec5f70f857288640e670b9490.dir
      size: 515621
      nfiles: 2
    - path: dockers_started.txt
      hash: md5
      md5: cc72867581029d08025a87c527baf24e
      size: 29
    - path: models/train
      hash: md5
      md5: fdd105e1ff0e6fe67e016cd101ec830a.dir
      size: 1682517
      nfiles: 1
    - path: params.yaml
      hash: md5
      md5: a97732e2394ca5182247ec5768501b74
      size: 3407
    outs:
    - path: metrics/confusion_matrix.json
      hash: md5
      md5: f576bad495523900c31298f19bebfccf
      size: 75
    - path: metrics/scores.json
      hash: md5
      md5: fcc40d96c499c49894e03a6555f8e2b9
      size: 399
  env_mlops_sake:
    cmd: python3 src/config_transform_as_env.py && python src/smart_merge_.env_.env_mlops_sake.py
    deps:
    - path: params.yaml
      hash: md5
      md5: a97732e2394ca5182247ec5768501b74
      size: 3407
    - path: src/config_transform_as_env.py
      hash: md5
      md5: d0ac128f1cc32185ebfd4bf959cf5c5f
      size: 3292
    - path: src/smart_merge_.env_.env_mlops_sake.py
      hash: md5
      md5: 59a04e062df44655488134f8946c638a
      size: 1287
  start_docker:
    cmd: source scripts/docker_clean_dangling_images.sh && docker-compose stop &&
      docker-compose up --build -d && date > dockers_started.txt
    deps:
    - path: .env_mlops_sake
      hash: md5
      md5: 776596d2261abe1b4b67767b11fd5029
      size: 3145
    - path: docker-compose.yaml
      hash: md5
      md5: f37199e1292c0ab4441dc2be39068619
      size: 5500
    outs:
    - path: dockers_started.txt
      hash: md5
      md5: b0064df85e6e6daf47115f32ff29f6c6
      size: 29
  start_dockers:
    cmd: source scripts/docker_clean_dangling_images.sh && docker-compose stop &&
      docker-compose up --build -d && date > dockers_started.txt
    deps:
    - path: .env_mlops_sake
      hash: md5
      md5: a6186028308dd83cd7e3b8c79b28bd8f
      size: 3266
    - path: docker-compose.yaml
      hash: md5
      md5: 80beee7cef45289a76589c16835297e4
      size: 5430
    outs:
    - path: dockers_started.txt
      hash: md5
      md5: cc72867581029d08025a87c527baf24e
      size: 29
