schema: '2.0'
stages:
  structure_raw:
    cmd: python3 src/data/structure_raw.py
    deps:
    - path: data/raw
      hash: md5
      md5: 6c3622ff98294a528208aece1e7ede8b.dir
      size: 21954635
      nfiles: 183
    - path: data/working_dataset.csv
      hash: md5
      md5: 02086bf6991f01344eccc4aba1935f1e
      size: 4542
    - path: dockers_started.txt
      hash: md5
      md5: 1ea9680867c7a769c4277fa713883f97
      size: 29
    - path: params.yaml
      hash: md5
      md5: df1e0a1f41469fb658629311bf52c677
      size: 2026
    - path: src/data/structure_raw.py
      hash: md5
      md5: 4083265122fda0173c9fcef0bce6d65e
      size: 3194
    outs:
    - path: data/raw_per_classes
      hash: md5
      md5: f649d221b593c31f1d3a432966a87f42.dir
      size: 21954635
      nfiles: 183
  ingest:
    cmd: 'curl -X "POST" "http://localhost:8907/ingest" -H "accept: application/json"'
    deps:
    - path: data/raw_per_classes
      hash: md5
      md5: f649d221b593c31f1d3a432966a87f42.dir
      size: 21954635
      nfiles: 183
    - path: dockers_started.txt
      hash: md5
      md5: 1ea9680867c7a769c4277fa713883f97
      size: 29
    - path: params.yaml
      hash: md5
      md5: df1e0a1f41469fb658629311bf52c677
      size: 2026
    outs:
    - path: data/ocr_raw_per_classes
      hash: md5
      md5: ff5eb92600b4ae1aebd4dd6e33148388.dir
      size: 174192
      nfiles: 183
  clean:
    cmd: 'curl -X "POST" "http://localhost:8907/clean" -H "accept: application/json"'
    deps:
    - path: data/ocr_raw_per_classes
      hash: md5
      md5: ff5eb92600b4ae1aebd4dd6e33148388.dir
      size: 174192
      nfiles: 183
    - path: dockers_started.txt
      hash: md5
      md5: 1ea9680867c7a769c4277fa713883f97
      size: 29
    - path: params.yaml
      hash: md5
      md5: df1e0a1f41469fb658629311bf52c677
      size: 2026
    outs:
    - path: data/cleaned_per_classes
      hash: md5
      md5: 7fdb9f68f4f5d43d0a4c770ba5a89307.dir
      size: 113376
      nfiles: 3
  preprocessing:
    cmd: curl -X "GET" "http://localhost:8904/process"
    deps:
    - path: data/cleaned_per_classes
      hash: md5
      md5: 7fdb9f68f4f5d43d0a4c770ba5a89307.dir
      size: 113376
      nfiles: 3
    - path: dockers_started.txt
      hash: md5
      md5: 1ea9680867c7a769c4277fa713883f97
      size: 29
    - path: params.yaml
      hash: md5
      md5: df1e0a1f41469fb658629311bf52c677
      size: 2026
    outs:
    - path: data/processed
      hash: md5
      md5: 11ba391e3bd264ae677e2a0f4c983e90.dir
      size: 3108658
      nfiles: 4
    - path: models/vectorizers
      hash: md5
      md5: a032fddfe18491a4c3631aa3c7393645.dir
      size: 2528831
      nfiles: 1
  train:
    cmd: curl -X "GET" "http://localhost:8905/train"
    deps:
    - path: data/processed/train
      hash: md5
      md5: 02944596f788b559478388011660ec5f.dir
      size: 2665933
      nfiles: 2
    - path: dockers_started.txt
      hash: md5
      md5: 1ea9680867c7a769c4277fa713883f97
      size: 29
    - path: params.yaml
      hash: md5
      md5: df1e0a1f41469fb658629311bf52c677
      size: 2026
    outs:
    - path: models/train
      hash: md5
      md5: a609bbca1a59764b6abb7b4f4b01e3be.dir
      size: 1682517
      nfiles: 1
  eval:
    cmd: curl -X "GET" "http://localhost:8906/eval"
    deps:
    - path: data/processed/test
      hash: md5
      md5: c81e690ef32bd3f302eec13e3b120fe9.dir
      size: 442725
      nfiles: 2
    - path: dockers_started.txt
      hash: md5
      md5: 1ea9680867c7a769c4277fa713883f97
      size: 29
    - path: models/train
      hash: md5
      md5: a609bbca1a59764b6abb7b4f4b01e3be.dir
      size: 1682517
      nfiles: 1
    - path: params.yaml
      hash: md5
      md5: df1e0a1f41469fb658629311bf52c677
      size: 2026
    outs:
    - path: metrics/confusion_matrix.json
      hash: md5
      md5: f576bad495523900c31298f19bebfccf
      size: 75
    - path: metrics/scores.json
      hash: md5
      md5: fcc40d96c499c49894e03a6555f8e2b9
      size: 399
  env_mlops_sake:
    cmd: python3 src/config_transform_as_env.py && python src/smart_merge_.env_.env_mlops_sake.py
    deps:
    - path: params.yaml
      hash: md5
      md5: df1e0a1f41469fb658629311bf52c677
      size: 2026
    - path: src/config_transform_as_env.py
      hash: md5
      md5: b8c0d80fe6293d7af4146c63575718bb
      size: 2668
    - path: src/smart_merge_.env_.env_mlops_sake.py
      hash: md5
      md5: b414ccb85a884e0568fe5ffbb3d3c766
      size: 1216
  start_docker:
    cmd: docker-compose stop && docker-compose up --build -d && date > dockers_started.txt
    deps:
    - path: .env_mlops_sake
      hash: md5
      md5: 68e6ba87fa545391d38b67ddc6dd0ad8
      size: 1867
    - path: docker-compose.yaml
      hash: md5
      md5: 53566377532d6d6f07ff56de5383f70c
      size: 4488
